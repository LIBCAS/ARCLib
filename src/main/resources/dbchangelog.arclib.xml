<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <property name="now" value="sysdate" dbms="oracle"/>
    <property name="now" value="getDate()" dbms="mssql"/>
    <property name="now" value="now()" dbms="mysql"/>
    <property name="now" value="now()" dbms="postgresql"/>
    <include file="dbchangelog.core.xml"/>
    <changeSet id="arclib:1" author="hochla">
        <createTable tableName="arclib_sip_profile">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_sip_profile_pkey" nullable="false"/>
            </column>
            <column name="name" type="nvarchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="xsl" type="nclob"/>
            <column name="package_type" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="authorial_id_file_path" type="varchar(2000)"/>
            <column name="authorial_id_xpath" type="varchar(2000)"/>
            <column name="sip_metadata_path" type="varchar(2000)"/>
        </createTable>

        <createTable tableName="arclib_validation_profile">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_validation_profile_pkey" nullable="false"/>
            </column>
            <column name="name" type="nvarchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="xml" type="nclob"/>
        </createTable>

        <createTable tableName="arclib_producer">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_producer_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="name" type="nvarchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="transfer_area_path" type="varchar(2000)"/>
        </createTable>

        <createTable tableName="arclib_workflow_definition">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_workflow_definition_pkey" nullable="false"/>
            </column>
            <column name="name" type="nvarchar(255)"/>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>

            <column name="bpmn_definition" type="nclob"/>
        </createTable>

        <createTable tableName="arclib_producer_profile">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_producer_profile_pkey" nullable="false"/>
            </column>
            <column name="external_id" type="varchar(255)"/>
            <column name="name" type="nvarchar(255)"/>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>

            <column name="workflow_definition_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_workflow_definition_fk"
                             referencedTableName="arclib_workflow_definition" referencedColumnNames="id"/>
            </column>

            <column name="producer_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_producer_fk"
                             referencedTableName="arclib_producer" referencedColumnNames="id"/>
            </column>

            <column name="validation_profile_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_validation_profile_fk"
                             referencedTableName="arclib_validation_profile" referencedColumnNames="id"/>
            </column>

            <column name="sip_profile_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_sip_profile_fk"
                             referencedTableName="arclib_sip_profile" referencedColumnNames="id"/>
            </column>

            <column name="workflow_config" type="nclob"/>
            <column name="debugging_mode_active" type="boolean"/>
        </createTable>

        <insert tableName="uas_sequence">
            <column name="id" value="7c5a958a-7b8b-41f7-a8be-49aa07a13261"/>
            <column name="created" valueComputed="${now}"/>
            <column name="name" value="producer_profile"/>
            <column name="list_order" valueNumeric="0"/>
            <column name="deletable" valueBoolean="false"/>
            <column name="active" valueBoolean="true"/>
            <column name="format" value="0"/>
            <column name="counter" valueNumeric="1"/>
        </insert>

        <createTable tableName="arclib_batch">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_batch_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="state" type="varchar(2000)"/>
            <column name="producer_profile_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_producer_profile_fk"
                             referencedTableName="arclib_producer_profile" referencedColumnNames="id"/>
            </column>
            <column name="workflow_config" type="nclob"/>
            <column name="transfer_area_path" type="varchar(2000)"/>
            <column name="debugging_mode_active" type="boolean"/>
        </createTable>

        <createTable tableName="arclib_ingest_workflow_failure_info">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_ingest_workflow_failure_info_pkey"
                             nullable="false"/>
            </column>
            <column name="msg" type="nvarchar(255)"/>
            <column name="stack_trace" type="nclob"/>
            <column name="ingest_workflow_failure_type" type="varchar(255)"/>
        </createTable>

        <createTable tableName="arclib_authorial_package">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_authorial_package_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="authorial_id" type="varchar(255)"/>
            <column name="producer_profile_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_producer_profile_fk"
                             referencedTableName="arclib_producer_profile" referencedColumnNames="id"/>
            </column>
        </createTable>

        <addUniqueConstraint
                columnNames="authorial_id, producer_profile_id"
                tableName="arclib_authorial_package"
        />

        <createTable tableName="arclib_sip">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_sip_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>

            <column name="folder_structure" type="bytea"/>
            <column name="authorial_package_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_authorial_package_fk"
                             referencedTableName="arclib_authorial_package" referencedColumnNames="id"/>
            </column>
            <column name="previous_version_sip_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_previous_version_sip_fk"
                             referencedTableName="arclib_sip" referencedColumnNames="id"/>
            </column>
            <column name="version_number" type="int"/>
        </createTable>

        <createTable tableName="arclib_hash">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_hash_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>

            <column name="hash_value" type="nvarchar(2000)"/>
            <column name="hash_type" type="varchar(255)"/>
        </createTable>

        <createTable tableName="arclib_ingest_workflow">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_ingest_workflow_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="original_file_name" type="nvarchar(2000)"/>

            <column name="external_id" type="varchar(255)"/>
            <column name="processing_state" type="varchar(2000)"/>
            <column name="versioning_level" type="varchar(255)"/>
            <column name="xml_version_number" type="int"/>
            <column name="sip_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_sip_fk"
                             referencedTableName="arclib_sip" referencedColumnNames="id"/>
            </column>
            <column name="batch_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_batch_fk"
                             referencedTableName="arclib_batch" referencedColumnNames="id"/>
            </column>
            <column name="ingest_workflow_failure_info_id" type="varchar(255)">
                <constraints foreignKeyName="sip_ingest_workflow_failure_info_fk"
                             referencedTableName="arclib_ingest_workflow_failure_info" referencedColumnNames="id"/>
            </column>
            <column name="related_workflow_id" type="varchar(255)">
                <constraints foreignKeyName="related_ingest_workflow_fk"
                             referencedTableName="arclib_ingest_workflow" referencedColumnNames="id"/>
            </column>
            <column name="hash_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_hash_fk"
                             referencedTableName="arclib_hash" referencedColumnNames="id"/>
            </column>
            <column name="is_latest_version" type="boolean"/>
            <column name="arclib_xml_hash_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_xml_hash_fk"
                             referencedTableName="arclib_hash" referencedColumnNames="id"/>
            </column>
        </createTable>

        <insert tableName="uas_sequence">
            <column name="id" value="16ea6aab-ff6f-46d3-84a3-5afd6db216b3"/>
            <column name="created" valueComputed="${now}"/>
            <column name="name" value="producer_profile"/>
            <column name="list_order" valueNumeric="0"/>
            <column name="deletable" valueBoolean="false"/>
            <column name="active" valueBoolean="true"/>
            <column name="format" value="0"/>
            <column name="counter" valueNumeric="1"/>
        </insert>

        <createTable tableName="arclib_report">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_report_pkey" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="template" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="compiled" type="bytea">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="arclib_user">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_user_pkey" nullable="false"/>
            </column>
            <column name="username" type="nvarchar(255)">
                <constraints unique="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="first_name" type="nvarchar(255)"/>
            <column name="last_name" type="nvarchar(255)"/>
            <column name="ldap_dn" type="nvarchar(255)"/>
            <column name="email" type="nvarchar(255)"/>
            <column name="producer_id" type="varchar(255)">
                <constraints foreignKeyName="user_producer_fk"
                             referencedTableName="arclib_producer" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_ingest_routine">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_ingest_routine_pkey" nullable="false"/>
            </column>
            <column name="name" type="nvarchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="producer_profile_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_producer_profile_fk"
                             referencedTableName="arclib_producer_profile" referencedColumnNames="id"/>
            </column>
            <column name="transfer_area_path" type="varchar(2000)"/>
            <column name="workflow_config" type="nclob"/>

            <column name="job_id" type="varchar(255)">
                <constraints foreignKeyName="uas_job_fk"
                             referencedTableName="uas_job" referencedColumnNames="id"/>
            </column>

            <column name="creator_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_user_fk"
                             referencedTableName="arclib_user" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_aip_query">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_aip_query_pkey" nullable="false"/>
            </column>
            <column name="name" type="nvarchar(255)"/>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="query" type="bytea"/>
            <column name="result" type="bytea"/>
            <column name="user_id" type="varchar(255)">
                <constraints foreignKeyName="aip_query_user_fk"
                             referencedTableName="arclib_user" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_sip_h">
            <column name="sip_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_sip_hashes_s_fk"
                             referencedTableName="arclib_sip" referencedColumnNames="id"/>
            </column>

            <column name="hash_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_sip_hashes_h_fk"
                             referencedTableName="arclib_hash" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_role">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_role_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="name" type="nvarchar(255)"/>
            <column name="description" type="nclob"/>
        </createTable>

        <createTable tableName="arclib_assigned_role">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_assigned_role_pkey" nullable="false"/>
            </column>
            <column name="user_id" type="varchar(255)"/>
            <column name="role_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_assigned_role_role_fk"
                             referencedTableName="arclib_role" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_ingest_issue">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_ingest_issue_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="task_executor" type="varchar(255)"/>
            <column name="issue" type="text"/>
            <column name="solved_by_config" type="boolean"/>
            <column name="config_note" type="text"/>
            <column name="ingest_workflow_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_ingest_issue_ingest_workflow_fk"
                             referencedTableName="arclib_ingest_workflow" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_authorial_package_update_lock">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_authorial_package_update_lock_pkey"
                             nullable="false"/>
            </column>
            <column name="authorial_package_id" type="varchar(255)">
                <constraints unique="true" foreignKeyName="authorial_packge_fk"
                             referencedTableName="arclib_authorial_package" referencedColumnNames="id"/>
            </column>
            <column name="locked" type="boolean"/>
            <column name="latest_locked_instant" type="datetime"/>
            <column name="timeout_check_job_id" type="varchar(255)">
                <constraints foreignKeyName="uas_job_fk"
                             referencedColumnNames="id" referencedTableName="uas_job"/>
            </column>
        </createTable>

        <createTable tableName="arclib_aip_deletion_request">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_deletion_request_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="aip_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_aip_fk"
                             referencedTableName="arclib_sip" referencedColumnNames="id"/>
            </column>
            <column name="requester_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_requester_fk"
                             referencedTableName="arclib_user" referencedColumnNames="id"/>
            </column>
            <column name="confirmer1_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_confirmer_1_fk"
                             referencedTableName="arclib_user" referencedColumnNames="id"/>
            </column>
            <column name="confirmer2_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_confirmer_2_fk"
                             referencedTableName="arclib_user" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_format">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_format_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="name" type="nvarchar(255)"/>
            <column name="version" type="nvarchar(255)"/>
            <column name="classification" type="nvarchar(255)"/>
            <column name="description" type="nvarchar(4000)"/>
            <column name="release_date" type="datetime"/>
            <column name="withdrawn_date" type="datetime"/>
            <column name="note" type="nvarchar(255)"/>
            <column name="national_format_guarantor" type="nvarchar(255)"/>
            <column name="preservation_plan_description" type="nvarchar(255)"/>

            <column name="preservation_plan_file_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_format_p_p_f_fk"
                             referencedTableName="uas_file" referencedColumnNames="id"/>
            </column>

            <column name="previous_internal_version_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_format_p_i_v_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="internal_version_number" type="int"/>
            <column name="threat_level" type="nvarchar(255)"/>
        </createTable>

        <createTable tableName="arclib_format_o_n">
            <column name="arclib_format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_o_n_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="other_name" type="nvarchar(255)">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>

        <createTable tableName="arclib_format_f_f">
            <column name="arclib_format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_f_f_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="format_family" type="nvarchar(255)">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>

        <createTable tableName="arclib_related_format">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_related_format_pkey" nullable="false"/>
            </column>

            <column name="relationship_type" type="nvarchar(255)"/>

            <column name="related_format_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_related_format_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_format_r_f">
            <column name="format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_f_r_f_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="related_format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_f_r_f_r_f_fk"
                             referencedTableName="arclib_related_format" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_format_d">
            <column name="arclib_format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_d_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="developer" type="nvarchar(255)">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>

        <createTable tableName="arclib_format_identifier">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_format_identifier_pkey" nullable="false"/>
            </column>

            <column name="type" type="nvarchar(255)"/>
            <column name="value" type="nvarchar(255)"/>
        </createTable>

        <createTable tableName="arclib_format_i">
            <column name="format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_f_i_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="format_identifier_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_f_i_f_i_fk"
                             referencedTableName="arclib_format_identifier" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_related_error">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_related_error_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>

            <column name="description" type="nvarchar(4000)"/>
            <column name="solution" type="nvarchar(4000)"/>
        </createTable>

        <createTable tableName="arclib_format_r_e">
            <column name="format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_r_e_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="related_error_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_r_e_r_e_fk"
                             referencedTableName="arclib_related_error" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_risk">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_risk_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>

            <column name="description" type="nvarchar(6000)"/>
        </createTable>

        <createTable tableName="arclib_format_r_r">
            <column name="format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_r_r_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="related_risk_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_r_r_r_r_fk"
                             referencedTableName="arclib_risk" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_tool">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_tool_pkey" nullable="false"/>
            </column>
            <column name="name" type="nvarchar(255)"/>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>

            <column name="version" type="int"/>
            <column name="description" type="nvarchar(4000)"/>
            <column name="tool_function" type="nvarchar(255)"/>
            <column name="license_information" type="nvarchar(2000)"/>
            <column name="documentation" type="nclob"/>
        </createTable>

        <createTable tableName="arclib_format_r_t">
            <column name="format_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_r_t_f_fk"
                             referencedTableName="arclib_format" referencedColumnNames="id"/>
            </column>

            <column name="tool_id" type="varchar(255)">
                <constraints nullable="false" primaryKey="true" foreignKeyName="arclib_format_t_t_fk"
                             referencedTableName="arclib_tool" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="arclib_export_routine">
            <column name="id" type="varchar(255)">
                <constraints primaryKey="true" primaryKeyName="arclib_export_routine_pkey" nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="updated" type="datetime"/>
            <column name="deleted" type="datetime"/>
            <column name="export_time" type="datetime"/>

            <column name="export_location_path" type="varchar(2000)"/>

            <column name="aip_query_id" type="varchar(255)">
                <constraints foreignKeyName="aip_query_fk"
                             referencedTableName="arclib_aip_query" referencedColumnNames="id"/>
            </column>

            <column name="job_id" type="varchar(255)">
                <constraints foreignKeyName="uas_job_fk"
                             referencedTableName="uas_job" referencedColumnNames="id"/>
            </column>

            <column name="creator_id" type="varchar(255)">
                <constraints foreignKeyName="arclib_user_fk"
                             referencedTableName="arclib_user" referencedColumnNames="id"/>
            </column>

            <column name="type" type="varchar(255)"/>
        </createTable>
    </changeSet>

</databaseChangeLog>
