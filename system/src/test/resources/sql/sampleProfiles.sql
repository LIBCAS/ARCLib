INSERT INTO public.arclib_producer(id, created, updated, name, transfer_area_path) VALUES ('aa7ddcc5-5b81-4747-bfeb-1850d952a359', current_timestamp, current_timestamp, 'Producer 1', 'prod1');
INSERT INTO public.arclib_validation_profile(id, external_id, created, updated, producer_id, "xml","name", editable) VALUES ('7916f84a-8958-4427-9c3c-6232f5326237', '90000', current_timestamp, current_timestamp,'aa7ddcc5-5b81-4747-bfeb-1850d952a359', '<?xml version="1.0"?>' ||chr(13)||chr(10)|| '<profile xmlns="http://www.arclib.lib.cas.cz/VALIDATION_PROFILE">' ||chr(13)||chr(10)||'  <rule>' ||chr(13)||chr(10)|| '    <nodeCheck>' ||chr(13)||chr(10)|| '      <filePathGlobPattern>alto/alto_7033d800-0935-11e4-beed-5ef3fc9ae867_0001.xml</filePathGlobPattern>' ||chr(13)||chr(10)|| '      <xPath>/alto/Description/MeasurementUnit</xPath>' ||chr(13)||chr(10)|| '      <value>pixel</value>' ||chr(13)||chr(10)|| '    </nodeCheck>' ||chr(13)||chr(10)|| '  </rule>' ||chr(13)||chr(10)|| '  <rule>' ||chr(13)||chr(10)|| '    <nodeCheck>' ||chr(13)||chr(10)|| '      <filePathGlobPattern>amdsec/amd_mets_7033d800-0935-11e4-beed-5ef3fc9ae867_0001.xml</filePathGlobPattern>' ||chr(13)||chr(10)|| '      <xPath>/mets/metsHdr/agent/name</xPath>' ||chr(13)||chr(10)|| '      <regex>.*001</regex>' ||chr(13)||chr(10)|| '    </nodeCheck>' ||chr(13)||chr(10)|| '  </rule>' ||chr(13)||chr(10)|| '  <rule>' ||chr(13)||chr(10)|| '    <fileExistenceCheck>' ||chr(13)||chr(10)|| '      <filePathGlobPattern>info_7033d800-0935-11e4-beed-5ef3fc9ae867.xml</filePathGlobPattern>' ||chr(13)||chr(10)|| '    </fileExistenceCheck>' ||chr(13)||chr(10)|| '  </rule>' ||chr(13)||chr(10)|| '</profile>','Validation profile 1', true);
INSERT INTO public.arclib_workflow_definition(id, created, updated, producer_id, bpmn_definition,"name", editable) VALUES ('b1b6cc1a-0581-4e35-8b42-49e293753c16', current_timestamp, current_timestamp, 'aa7ddcc5-5b81-4747-bfeb-1850d952a359', '<?xml version="1.0" encoding="UTF-8"?>' ||chr(13)||chr(10)|| '<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="2.0.3">' ||chr(13)||chr(10)|| '  <bpmn:process id="ingestWorkflow" isExecutable="true">' ||chr(13)||chr(10)|| '    <bpmn:startEvent id="init" name="init">' ||chr(13)||chr(10)|| '      <bpmn:outgoing>SequenceFlow_10xr812</bpmn:outgoing>' ||chr(13)||chr(10)|| '    </bpmn:startEvent>' ||chr(13)||chr(10)|| '    <bpmn:serviceTask id="antivirus" name="antivirus" camunda:asyncBefore="true" camunda:delegateExpression="${antivirusDelegate}">' ||chr(13)||chr(10)|| '      <bpmn:incoming>SequenceFlow_1qyy2bs</bpmn:incoming>' ||chr(13)||chr(10)|| '      <bpmn:outgoing>SequenceFlow_020l49h</bpmn:outgoing>' ||chr(13)||chr(10)|| '    </bpmn:serviceTask>' ||chr(13)||chr(10)|| '    <bpmn:serviceTask id="fixityGenerator" name="fixity generator" camunda:asyncBefore="true" camunda:delegateExpression="${fixityGeneratorDelegate}">' ||chr(13)||chr(10)|| '      <bpmn:incoming>SequenceFlow_118r7ij</bpmn:incoming>' ||chr(13)||chr(10)|| '      <bpmn:outgoing>SequenceFlow_1h30i5i</bpmn:outgoing>' ||chr(13)||chr(10)|| '    </bpmn:serviceTask>' ||chr(13)||chr(10)|| '    <bpmn:subProcess id="SubProcess_0m3ut3d" triggeredByEvent="true">' ||chr(13)||chr(10)|| '      <bpmn:startEvent id="bpmErrorStartEvent" name="bpm error start event">' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_14npmls</bpmn:outgoing>' ||chr(13)||chr(10)|| '        <bpmn:errorEventDefinition errorRef="Error_16v6tah" camunda:errorCodeVariable="errorCode" camunda:errorMessageVariable="errorMessage"/>' ||chr(13)||chr(10)|| '      </bpmn:startEvent>' ||chr(13)||chr(10)|| '      <bpmn:serviceTask id="bpmErrorHandler" name="bpm error handler" camunda:delegateExpression="${bpmErrorHandlerDelegate}">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_14npmls</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_0zt5now</bpmn:outgoing>' ||chr(13)||chr(10)|| '      </bpmn:serviceTask>' ||chr(13)||chr(10)|| '      <bpmn:endEvent id="bpmErrorEndEvent" name="bpm error end event">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_0zt5now</bpmn:incoming>' ||chr(13)||chr(10)|| '      </bpmn:endEvent>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_14npmls" sourceRef="bpmErrorStartEvent" targetRef="bpmErrorHandler"/>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_0zt5now" sourceRef="bpmErrorHandler" targetRef="bpmErrorEndEvent"/>' ||chr(13)||chr(10)|| '    </bpmn:subProcess>' ||chr(13)||chr(10)|| '    <bpmn:serviceTask id="validator" name="validator" camunda:asyncBefore="true" camunda:delegateExpression="${validatorDelegate}">' ||chr(13)||chr(10)|| '      <bpmn:incoming>SequenceFlow_1lv9rpm</bpmn:incoming>' ||chr(13)||chr(10)|| '      <bpmn:outgoing>SequenceFlow_118r7ij</bpmn:outgoing>' ||chr(13)||chr(10)|| '    </bpmn:serviceTask>' ||chr(13)||chr(10)|| '    <bpmn:serviceTask id="formatIdentification" name="format identifier" camunda:asyncBefore="true" camunda:delegateExpression="${formatIdentificationDelegate}">' ||chr(13)||chr(10)|| '      <bpmn:incoming>SequenceFlow_10xr812</bpmn:incoming>' ||chr(13)||chr(10)|| '      <bpmn:outgoing>SequenceFlow_1qyy2bs</bpmn:outgoing>' ||chr(13)||chr(10)|| '    </bpmn:serviceTask>' ||chr(13)||chr(10)|| '    <bpmn:serviceTask id="fixityCheck" name="fixity check" camunda:asyncBefore="true" camunda:delegateExpression="${fixityCheckerDelegate}">' ||chr(13)||chr(10)|| '      <bpmn:incoming>SequenceFlow_020l49h</bpmn:incoming>' ||chr(13)||chr(10)|| '      <bpmn:outgoing>SequenceFlow_1lv9rpm</bpmn:outgoing>' ||chr(13)||chr(10)|| '    </bpmn:serviceTask>' ||chr(13)||chr(10)|| '    <bpmn:sequenceFlow id="SequenceFlow_020l49h" sourceRef="antivirus" targetRef="fixityCheck"/>' ||chr(13)||chr(10)|| '    <bpmn:sequenceFlow id="SequenceFlow_1lv9rpm" sourceRef="fixityCheck" targetRef="validator"/>' ||chr(13)||chr(10)|| '    <bpmn:sequenceFlow id="SequenceFlow_118r7ij" sourceRef="validator" targetRef="fixityGenerator"/>' ||chr(13)||chr(10)|| '    <bpmn:subProcess id="SubProcess_07ljd3i" name="finalize ingest">' ||chr(13)||chr(10)|| '      <bpmn:incoming>SequenceFlow_1h30i5i</bpmn:incoming>' ||chr(13)||chr(10)|| '      <bpmn:serviceTask id="ServiceTask_0b2g5c0" name="ArclibXml generator" camunda:asyncBefore="true" camunda:delegateExpression="${arclibXmlGeneratorDelegate}">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_1iwnh8s</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_0n2wp4g</bpmn:outgoing>' ||chr(13)||chr(10)|| '      </bpmn:serviceTask>' ||chr(13)||chr(10)|| '      <bpmn:endEvent id="ingestSuccessEvent" name="ingest success event"><bpmn:extensionElements><camunda:executionListener delegateExpression="${ingestSuccessEventDelegate}" event="start" /></bpmn:extensionElements>' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_0np9etf</bpmn:incoming>' ||chr(13)||chr(10)|| '      </bpmn:endEvent>' ||chr(13)||chr(10)|| '      <bpmn:exclusiveGateway id="ExclusiveGateway_16nlbuk" camunda:asyncBefore="true">' ||chr(13)||chr(10)|| '        <bpmn:extensionElements>' ||chr(13)||chr(10)|| '          <camunda:properties>' ||chr(13)||chr(10)|| '            <camunda:property/>' ||chr(13)||chr(10)|| '          </camunda:properties>' ||chr(13)||chr(10)|| '        </bpmn:extensionElements>' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_1j4hj2j</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_1qfqjnh</bpmn:outgoing>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_15x18qm</bpmn:outgoing>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_0np9etf</bpmn:outgoing>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_1gtsp32</bpmn:outgoing>' ||chr(13)||chr(10)|| '      </bpmn:exclusiveGateway>' ||chr(13)||chr(10)|| '      <bpmn:startEvent id="StartEvent_16sfszv">' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_0a6zqyo</bpmn:outgoing>' ||chr(13)||chr(10)|| '      </bpmn:startEvent>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_1qfqjnh" name="storage failed too many times or it is processing for too long" sourceRef="ExclusiveGateway_16nlbuk" targetRef="ingestErrorEvent">' ||chr(13)||chr(10)|| '        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${aipStoreRetries == 0 || aipSavedCheckRetries == 0}</bpmn:conditionExpression>' ||chr(13)||chr(10)|| '      </bpmn:sequenceFlow>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_0a6zqyo" sourceRef="StartEvent_16sfszv" targetRef="ServiceTask_0fxsc9x"/>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_15x18qm" name="storage still processing" sourceRef="ExclusiveGateway_16nlbuk" targetRef="IntermediateThrowEvent_0oopavs">' ||chr(13)||chr(10)|| '        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression"><![CDATA[${aipState == ''PROCESSING'' && aipSavedCheckRetries > 0}]]></bpmn:conditionExpression>' ||chr(13)||chr(10)|| '      </bpmn:sequenceFlow>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_0np9etf" name="storage ok" sourceRef="ExclusiveGateway_16nlbuk" targetRef="ingestSuccessEvent">' ||chr(13)|| '        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression"><![CDATA[${aipState == ''ARCHIVED''}]]></bpmn:conditionExpression>' ||chr(13)||chr(10)|| '      </bpmn:sequenceFlow>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_1gtsp32" name="storage failed" sourceRef="ExclusiveGateway_16nlbuk" targetRef="IntermediateThrowEvent_0qpz5bp">' ||chr(13)||chr(10)|| '        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${aipState == ''ARCHIVAL_FAILURE'' &amp;&amp; aipStoreRetries &gt; 0}</bpmn:conditionExpression>' ||chr(13)||chr(10)|| '      </bpmn:sequenceFlow>' ||chr(13)||chr(10)|| '      <bpmn:intermediateCatchEvent id="IntermediateThrowEvent_0qpz5bp">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_1gtsp32</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_1589txq</bpmn:outgoing>' ||chr(13)||chr(10)|| '        <bpmn:timerEventDefinition>' ||chr(13)||chr(10)|| '          <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">${aipStoreTimeout}</bpmn:timeDuration>' ||chr(13)||chr(10)|| '        </bpmn:timerEventDefinition>' ||chr(13)||chr(10)|| '      </bpmn:intermediateCatchEvent>' ||chr(13)||chr(10)|| '      <bpmn:intermediateCatchEvent id="IntermediateThrowEvent_0oopavs">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_15x18qm</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_0ooeftp</bpmn:outgoing>' ||chr(13)||chr(10)|| '        <bpmn:timerEventDefinition>' ||chr(13)||chr(10)|| '          <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">${aipSavedCheckTimeout}</bpmn:timeDuration>' ||chr(13)||chr(10)|| '        </bpmn:timerEventDefinition>' ||chr(13)||chr(10)|| '      </bpmn:intermediateCatchEvent>' ||chr(13)||chr(10)|| '      <bpmn:endEvent id="ingestErrorEvent" name="ingest error event">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_1qfqjnh</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:errorEventDefinition errorRef="Error_1olr0r0"/>' ||chr(13)||chr(10)|| '      </bpmn:endEvent>' ||chr(13)||chr(10)|| '      <bpmn:serviceTask id="ServiceTask_1snmjbd" name="archival storage" camunda:asyncBefore="true" camunda:delegateExpression="${archivalStorageDelegate}">' ||chr(13)||chr(10)|| '        <bpmn:extensionElements>' ||chr(13)||chr(10)|| '          <camunda:failedJobRetryTimeCycle>R5/PT1M</camunda:failedJobRetryTimeCycle>' ||chr(13)||chr(10)|| '        </bpmn:extensionElements>' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_1589txq</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_0n2wp4g</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_0oizux8</bpmn:outgoing>' ||chr(13)||chr(10)|| '      </bpmn:serviceTask>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_1589txq" sourceRef="IntermediateThrowEvent_0qpz5bp" targetRef="ServiceTask_1snmjbd"/>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_0n2wp4g" sourceRef="ServiceTask_0b2g5c0" targetRef="ServiceTask_1snmjbd"/>' ||chr(13)||chr(10)|| '      <bpmn:serviceTask id="ServiceTask_15sn5m2" name="storage success verifier" camunda:asyncBefore="true" camunda:delegateExpression="${storageSuccessVerifierDelegate}">' ||chr(13)||chr(10)|| '        <bpmn:extensionElements>' ||chr(13)||chr(10)|| '          <camunda:failedJobRetryTimeCycle>R5/PT1M</camunda:failedJobRetryTimeCycle>' ||chr(13)||chr(10)|| '        </bpmn:extensionElements>' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_0oizux8</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_0ooeftp</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_1j4hj2j</bpmn:outgoing>' ||chr(13)||chr(10)|| '      </bpmn:serviceTask>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_1j4hj2j" sourceRef="ServiceTask_15sn5m2" targetRef="ExclusiveGateway_16nlbuk"/>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_0oizux8" sourceRef="ServiceTask_1snmjbd" targetRef="ServiceTask_15sn5m2"/>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_0ooeftp" sourceRef="IntermediateThrowEvent_0oopavs" targetRef="ServiceTask_15sn5m2"/>' ||chr(13)||chr(10)|| '      <bpmn:serviceTask id="ServiceTask_0fxsc9x" name="ArclibXml extractor" camunda:asyncBefore="true" camunda:delegateExpression="${arclibXmlExtractorDelegate}">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_0a6zqyo</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_1iwnh8s</bpmn:outgoing>' ||chr(13)||chr(10)|| '      </bpmn:serviceTask>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_1iwnh8s" sourceRef="ServiceTask_0fxsc9x" targetRef="ServiceTask_0b2g5c0"/>' ||chr(13)||chr(10)|| '    </bpmn:subProcess>' ||chr(13)||chr(10)|| '    <bpmn:subProcess id="SubProcess_15fffya" triggeredByEvent="true">' ||chr(13)||chr(10)|| '      <bpmn:startEvent id="storageErrorStartEvent" name="storage error start event">' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_0wgkgq5</bpmn:outgoing>' ||chr(13)||chr(10)|| '        <bpmn:errorEventDefinition errorRef="Error_1olr0r0" camunda:errorCodeVariable="errorCode" camunda:errorMessageVariable="errorMessage"/>' ||chr(13)||chr(10)|| '      </bpmn:startEvent>' ||chr(13)||chr(10)|| '      <bpmn:serviceTask id="storageErrorHandler" name="storage error handler" camunda:delegateExpression="${bpmErrorHandlerDelegate}">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_0wgkgq5</bpmn:incoming>' ||chr(13)||chr(10)|| '        <bpmn:outgoing>SequenceFlow_1v9rnml</bpmn:outgoing>' ||chr(13)||chr(10)|| '      </bpmn:serviceTask>' ||chr(13)||chr(10)|| '      <bpmn:endEvent id="storageErrorEndEvent" name="storage error end event">' ||chr(13)||chr(10)|| '        <bpmn:incoming>SequenceFlow_1v9rnml</bpmn:incoming>' ||chr(13)||chr(10)|| '      </bpmn:endEvent>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_0wgkgq5" sourceRef="storageErrorStartEvent" targetRef="storageErrorHandler"/>' ||chr(13)||chr(10)|| '      <bpmn:sequenceFlow id="SequenceFlow_1v9rnml" sourceRef="storageErrorHandler" targetRef="storageErrorEndEvent"/>' ||chr(13)||chr(10)|| '    </bpmn:subProcess>' ||chr(13)||chr(10)|| '    <bpmn:sequenceFlow id="SequenceFlow_1qyy2bs" sourceRef="formatIdentification" targetRef="antivirus"/>' ||chr(13)||chr(10)|| '    <bpmn:sequenceFlow id="SequenceFlow_1h30i5i" sourceRef="fixityGenerator" targetRef="SubProcess_07ljd3i"/>' ||chr(13)||chr(10)|| '    <bpmn:sequenceFlow id="SequenceFlow_10xr812" sourceRef="init" targetRef="formatIdentification"/>' ||chr(13)||chr(10)|| '  </bpmn:process>' ||chr(13)||chr(10)|| '  <bpmn:error id="Error_1j240sk" name="runtimeError" errorCode="java.lang.RuntimeException"/>' ||chr(13)||chr(10)|| '  <bpmn:error id="Error_16v6tah" name="bpmError" errorCode="processFailure"/>' ||chr(13)||chr(10)|| '  <bpmn:error id="Error_1olr0r0" name="storageError" errorCode="storageFailure"/>' ||chr(13)||chr(10)|| '  <bpmndi:BPMNDiagram id="BPMNDiagram_1">' ||chr(13)||chr(10)|| '    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="ingestWorkflow">' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="StartEvent_1y3rro6_di" bpmnElement="init">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-452" y="-349" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-440" y="-309" width="14" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_0z6wumr_di" bpmnElement="antivirus">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-252" y="-371" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_0nhvpwh_di" bpmnElement="fixityGenerator">' ||chr(13)||chr(10)|| '        <dc:Bounds x="166" y="-371" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="SubProcess_0m3ut3d_di" bpmnElement="SubProcess_0m3ut3d" isExpanded="true">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-402" y="124" width="306" height="122"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="StartEvent_0osz2mu_di" bpmnElement="bpmErrorStartEvent">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-382" y="166" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-392" y="204" width="74" height="24"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_1vdb3kz_di" bpmnElement="bpmErrorHandler">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-304" y="144" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="EndEvent_0s1mmir_di" bpmnElement="bpmErrorEndEvent">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-168" y="166" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-184" y="204" width="69" height="24"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_14npmls_di" bpmnElement="SequenceFlow_14npmls">' ||chr(13)||chr(10)|| '        <di:waypoint x="-346" y="184"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-304" y="184"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-370" y="163" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_0zt5now_di" bpmnElement="SequenceFlow_0zt5now">' ||chr(13)||chr(10)|| '        <di:waypoint x="-204" y="184"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-168" y="184"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-231" y="163" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_1y220pq_di" bpmnElement="validator">' ||chr(13)||chr(10)|| '        <dc:Bounds x="26" y="-371" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_07dfwlp_di" bpmnElement="formatIdentification">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-388" y="-371" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_1clbu9d_di" bpmnElement="fixityCheck">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-115" y="-371" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_020l49h_di" bpmnElement="SequenceFlow_020l49h">' ||chr(13)||chr(10)|| '        <di:waypoint x="-152" y="-331"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-115" y="-331"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-178" y="-352" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1lv9rpm_di" bpmnElement="SequenceFlow_1lv9rpm">' ||chr(13)||chr(10)|| '        <di:waypoint x="-15" y="-331"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="26" y="-331"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-39" y="-352" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_118r7ij_di" bpmnElement="SequenceFlow_118r7ij">' ||chr(13)||chr(10)|| '        <di:waypoint x="126" y="-331"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="166" y="-331"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="101" y="-352" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="SubProcess_07ljd3i_di" bpmnElement="SubProcess_07ljd3i" isExpanded="true">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-401" y="-243" width="674" height="341"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_0b2g5c0_di" bpmnElement="ServiceTask_0b2g5c0">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-381" y="-3" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="EndEvent_0lrb2a4_di" bpmnElement="ingestSuccessEvent">' ||chr(13)||chr(10)|| '        <dc:Bounds x="195" y="-144" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="176" y="-104" width="74" height="24"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ExclusiveGateway_16nlbuk_di" bpmnElement="ExclusiveGateway_16nlbuk" isMarkerVisible="true">' ||chr(13)||chr(10)|| '        <dc:Bounds x="54" y="-92" width="50" height="50"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="0" y="-38" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="StartEvent_16sfszv_di" bpmnElement="StartEvent_16sfszv">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-349" y="-214" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-376" y="-148" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1qfqjnh_di" bpmnElement="SequenceFlow_1qfqjnh">' ||chr(13)||chr(10)|| '        <di:waypoint x="79" y="-42"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="79" y="-5"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="195" y="-5"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="104" y="-66" width="88" height="48"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_0a6zqyo_di" bpmnElement="SequenceFlow_0a6zqyo">' ||chr(13)||chr(10)|| '        <di:waypoint x="-331" y="-178"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-331" y="-140"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-361" y="-135" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_15x18qm_di" bpmnElement="SequenceFlow_15x18qm">' ||chr(13)||chr(10)|| '        <di:waypoint x="79" y="-42"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="79" y="37"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-33" y="37"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-4" y="42" width="56" height="24"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_0np9etf_di" bpmnElement="SequenceFlow_0np9etf">' ||chr(13)||chr(10)|| '        <di:waypoint x="79" y="-92"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="79" y="-126"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="195" y="-126"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="112" y="-147" width="52" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1gtsp32_di" bpmnElement="SequenceFlow_1gtsp32">' ||chr(13)||chr(10)|| '        <di:waypoint x="79" y="-92"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="79" y="-170"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-172" y="-170"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-84" y="-193" width="65" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="IntermediateCatchEvent_10c18o1_di" bpmnElement="IntermediateThrowEvent_0qpz5bp">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-208" y="-188" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-235" y="-148" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="IntermediateCatchEvent_0wx1ml4_di" bpmnElement="IntermediateThrowEvent_0oopavs">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-69" y="19" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-96" y="59" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="EndEvent_0kegd0b_di" bpmnElement="ingestErrorEvent">' ||chr(13)||chr(10)|| '        <dc:Bounds x="195" y="-23" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="169" y="20" width="87" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="SubProcess_15fffya_di" bpmnElement="SubProcess_15fffya" isExpanded="true">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-33" y="124" width="306" height="122"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="StartEvent_0cn1yhs_di" bpmnElement="storageErrorStartEvent">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-13" y="166" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-18" y="204" width="65" height="24"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_0qpoqo1_di" bpmnElement="storageErrorHandler">' ||chr(13)||chr(10)|| '        <dc:Bounds x="65" y="144" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="EndEvent_11w4twn_di" bpmnElement="storageErrorEndEvent">' ||chr(13)||chr(10)|| '        <dc:Bounds x="201" y="166" width="36" height="36"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="177" y="204" width="85" height="24"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_0wgkgq5_di" bpmnElement="SequenceFlow_0wgkgq5">' ||chr(13)||chr(10)|| '        <di:waypoint x="23" y="184"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="65" y="184"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-1" y="163" width="0" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1v9rnml_di" bpmnElement="SequenceFlow_1v9rnml">' ||chr(13)||chr(10)|| '        <di:waypoint x="165" y="184"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="201" y="184"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="138" y="163" width="0" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1qyy2bs_di" bpmnElement="SequenceFlow_1qyy2bs">' ||chr(13)||chr(10)|| '        <di:waypoint x="-288" y="-331"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-252" y="-331"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-270" y="-352" width="0" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1h30i5i_di" bpmnElement="SequenceFlow_1h30i5i">' ||chr(13)||chr(10)|| '        <di:waypoint x="216" y="-291"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="216" y="-267"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-64" y="-267"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-64" y="-243"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="76" y="-288" width="0" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_10xr812_di" bpmnElement="SequenceFlow_10xr812">' ||chr(13)||chr(10)|| '        <di:waypoint x="-416" y="-331"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-388" y="-331"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-402" y="-352" width="0" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_1snmjbd_di" bpmnElement="ServiceTask_1snmjbd">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-240" y="-107" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1589txq_di" bpmnElement="SequenceFlow_1589txq">' ||chr(13)||chr(10)|| '        <di:waypoint x="-190" y="-152"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-190" y="-107"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-220" y="-135" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_0n2wp4g_di" bpmnElement="SequenceFlow_0n2wp4g">' ||chr(13)||chr(10)|| '        <di:waypoint x="-281" y="37"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-260" y="37"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-260" y="-67"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-240" y="-67"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-305" y="-88" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_15sn5m2_di" bpmnElement="ServiceTask_15sn5m2">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-101" y="-107" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1j4hj2j_di" bpmnElement="SequenceFlow_1j4hj2j">' ||chr(13)||chr(10)|| '        <di:waypoint x="-1" y="-67"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="54" y="-67"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-18" y="-88" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_0oizux8_di" bpmnElement="SequenceFlow_0oizux8">' ||chr(13)||chr(10)|| '        <di:waypoint x="-140" y="-67"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-101" y="-67"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-165" y="-88" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_0ooeftp_di" bpmnElement="SequenceFlow_0ooeftp">' ||chr(13)||chr(10)|| '        <di:waypoint x="-51" y="19"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-51" y="-4"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-51" y="-4"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-51" y="-27"/>' ||chr(13)||chr(10)|| '        <bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '          <dc:Bounds x="-81" y="-10" width="90" height="12"/>' ||chr(13)||chr(10)|| '        </bpmndi:BPMNLabel>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNShape id="ServiceTask_0fxsc9x_di" bpmnElement="ServiceTask_0fxsc9x">' ||chr(13)||chr(10)|| '        <dc:Bounds x="-381" y="-140" width="100" height="80"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNShape>' ||chr(13)||chr(10)|| '      <bpmndi:BPMNEdge id="SequenceFlow_1iwnh8s_di" bpmnElement="SequenceFlow_1iwnh8s">' ||chr(13)||chr(10)|| '        <di:waypoint x="-331" y="-60"/>' ||chr(13)||chr(10)|| '        <di:waypoint x="-331" y="-3"/>' ||chr(13)||chr(10)|| '      </bpmndi:BPMNEdge>' ||chr(13)||chr(10)|| '    </bpmndi:BPMNPlane>' ||chr(13)||chr(10)|| '  </bpmndi:BPMNDiagram>' ||chr(13)||chr(10)|| '</bpmn:definitions>', 'Workflow definition 1', true);
INSERT INTO public.arclib_sip_profile(id, external_id, created, updated, producer_id, xsl, authorial_id_file_path_regex, authorial_id_xpath, sip_metadata_path_regex, name, editable)
VALUES ('3cdc21a2-8b2a-4b56-81a8-3d2ee82ab6b4', '90000', current_timestamp, current_timestamp, 'aa7ddcc5-5b81-4747-bfeb-1850d952a359',
'
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:METS="http://www.loc.gov/METS/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ARCLib="http://arclib.lib.cas.cz/ARCLIB_XSD" xmlns:premis="info:lc/xmlns/premis-v2" xmlns:mix="http://www.loc.gov/mix/v20" xmlns:xlink="http://www.w3.org/1999/xlink" ><!-- == SPECIFICATION OF INPUT FILES == --><!--Path to SIP passed from the Java code--><xsl:param name="pathToSip"/><!--Path to main XML record (METS in the root folder) of SIP passed from the Java code--><xsl:param name="sipMetadataPath"/><xsl:variable name="sipMetadata" select="document(concat(''file:///'', $sipMetadataPath))/*"/><!-- == SETTING THE DEFAULT DOCUMENT == --><xsl:template match="/"><xsl:apply-templates select="$sipMetadata"/></xsl:template><!-- == CUSTOM TEMPLATES == --><xsl:template match="/METS:mets"><xsl:variable name="amdSecs" select="document(//METS:fileGrp[@ID=''TECHMDGRP'']/METS:file/METS:FLocat/concat(''file:///'', $pathToSip,@xlink:href))"/><xsl:copy><xsl:attribute name="LABEL"><xsl:value-of select="@LABEL"/></xsl:attribute><xsl:attribute name="TYPE"><xsl:value-of select="@TYPE"/></xsl:attribute><xsl:element name="METS:metsHdr"><xsl:copy-of select="/METS:mets/METS:metsHdr/METS:agent"/></xsl:element><xsl:copy-of select="METS:dmdSec"/><!--generate ARCLib:formats--><xsl:element name="METS:amdSec"><xsl:element name="METS:techMD"><xsl:attribute name="ID">ARCLIB_001</xsl:attribute><xsl:element name="METS:mdWrap"><xsl:attribute name="MDTYPE">OTHER</xsl:attribute><xsl:element name="METS:xmlData"><xsl:element name="ARCLib:formats"><xsl:for-each-group select="$amdSecs/METS:mets/METS:amdSec/METS:techMD/METS:mdWrap/ METS:xmlData/premis:object" group-by="concat(premis:objectCharacteristics/premis:format, premis:objectCharacteristics/premis:creatingApplication/ premis:creatingApplicationName, premis:objectCharacteristics/premis:creatingApplication/ premis:creatingApplicationVersion, substring(premis:objectCharacteristics/premis:creatingApplication/ premis:dateCreatedByApplication, 1, 10))"><xsl:element name="ARCLib:format"><xsl:element name="ARCLib:fileFormat"><xsl:value-of select="premis:objectCharacteristics/premis:format/ premis:formatDesignation/premis:formatName"/></xsl:element><xsl:element name="ARCLib:formatVersion"><xsl:value-of select="premis:objectCharacteristics/premis:format/ premis:formatDesignation/premis:formatVersion"/></xsl:element><xsl:element name="ARCLib:formatRegistryKey"><xsl:value-of select="premis:objectCharacteristics/premis:format/ premis:formatRegistry/premis:formatRegistryKey"/></xsl:element><xsl:element name="ARCLib:formatRegistryName"><xsl:value-of select="premis:objectCharacteristics/premis:format/ premis:formatRegistry/premis:formatRegistryName"/></xsl:element><xsl:element name="ARCLib:creatingApplicationName"><xsl:value-of select="premis:objectCharacteristics/premis:creatingApplication/ premis:creatingApplicationName"/></xsl:element><xsl:element name="ARCLib:creatingApplicationVersion"><xsl:value-of select="premis:objectCharacteristics/premis:creatingApplication/ premis:creatingApplicationVersion"/></xsl:element><xsl:element name="ARCLib:dateCreatedByApplication"><xsl:value-of select="substring(premis:objectCharacteristics/ premis:creatingApplication/premis:dateCreatedByApplication, 1, 10)"/></xsl:element><xsl:element name="ARCLib:preservationLevelValue"><xsl:value-of select="premis:preservationLevel/premis:preservationLevelValue"/></xsl:element><xsl:variable name="scannerModelSerialNo" select="/METS:mets/METS:amdSec/METS:techMD/METS:mdWrap/ METS:xmlData/mix:mix[mix:BasicDigitalObjectInformation/ mix:ObjectIdentifier/mix:objectIdentifierValue/text()= current()/premis:objectIdentifier/premis:objectIdentifierValue/text()] /mix:ImageCaptureMetadata/mix:ScannerCapture/mix:ScannerModel/ mix:scannerModelSerialNo" /><xsl:if test="$scannerModelSerialNo"><xsl:element name="ARCLib:scannerModelSerialNo"><xsl:value-of select="$scannerModelSerialNo"/></xsl:element></xsl:if><xsl:element name="ARCLib:fileCount"><xsl:value-of select="count(current-group())"/></xsl:element><xsl:element name="ARCLib:size"><xsl:value-of select="xs:decimal(sum(current-group()/premis:objectCharacteristics/premis:size/text()))"/></xsl:element></xsl:element></xsl:for-each-group></xsl:element></xsl:element></xsl:element></xsl:element></xsl:element><!--generate ARCLib:devices--><xsl:element name="METS:amdSec"><xsl:element name="METS:techMD"><xsl:attribute name="ID">ARCLIB_002</xsl:attribute><xsl:element name="METS:mdWrap"><xsl:attribute name="MDTYPE">OTHER</xsl:attribute><xsl:element name="METS:xmlData"><xsl:element name="ARCLib:devices"><xsl:for-each-group select="$amdSecs/METS:mets/METS:amdSec/METS:digiprovMD/METS:mdWrap/ METS:xmlData/premis:event" group-by="premis:linkingAgentIdentifier/premis:linkingAgentIdentifierValue"><xsl:element name="ARCLib:device"><xsl:element name="ARCLib:deviceId"><xsl:value-of select="current-grouping-key()"/></xsl:element><xsl:element name="ARCLib:fileCount"><xsl:value-of select="count(current-group())"/></xsl:element></xsl:element></xsl:for-each-group></xsl:element></xsl:element></xsl:element></xsl:element></xsl:element><!--generate ARCLib:eventAgents--><xsl:element name="METS:amdSec"><xsl:element name="METS:techMD"><xsl:attribute name="ID">ARCLIB_003</xsl:attribute><xsl:element name="METS:mdWrap"><xsl:attribute name="MDTYPE">OTHER</xsl:attribute><xsl:element name="METS:xmlData"><xsl:element name="ARCLib:eventAgents"><xsl:for-each-group select="$amdSecs/METS:mets/METS:amdSec/METS:digiprovMD/ METS:mdWrap/METS:xmlData/premis:event" group-by="concat(premis:eventType, premis:linkingAgentIdentifier/premis:linkingAgentIdentifierValue, substring(premis:eventDateTime, 1, 10))"><xsl:element name="ARCLib:eventAgent"><xsl:element name="ARCLib:eventType"><xsl:value-of select="premis:eventType"/></xsl:element><xsl:element name="ARCLib:agentName"><xsl:value-of select="distinct-values(/METS:mets/METS:amdSec/METS:digiprovMD/METS:mdWrap/ METS:xmlData/premis:agent[premis:agentIdentifier/ premis:agentIdentifierValue/text() = current()/premis:linkingAgentIdentifier/ premis:linkingAgentIdentifierValue/text()]/premis:agentName)"/></xsl:element><xsl:element name="ARCLib:linkingDeviceID"><xsl:value-of select="premis:linkingAgentIdentifier/premis:linkingAgentIdentifierValue"/></xsl:element><xsl:variable name="scannerModelSerialNo" select="/METS:mets/METS:amdSec/METS:techMD/METS:mdWrap/METS:xmlData/ mix:mix[mix:BasicDigitalObjectInformation/mix:ObjectIdentifier/ mix:objectIdentifierValue = current()/premis:linkingObjectIdentifier/ premis:linkingObjectIdentifierValue]/mix:ImageCaptureMetadata/ mix:ScannerCapture/mix:ScannerModel/mix:scannerModelSerialNo" /><xsl:if test="$scannerModelSerialNo"><xsl:element name="ARCLib:scannerModelSerialNo"><xsl:value-of select="$scannerModelSerialNo"/></xsl:element></xsl:if><xsl:variable name="scanningSoftwareName" select="/METS:mets/METS:amdSec/METS:techMD/METS:mdWrap/METS:xmlData/ mix:mix[mix:BasicDigitalObjectInformation/mix:ObjectIdentifier/ mix:objectIdentifierValue = current()/premis:linkingObjectIdentifier/ premis:linkingObjectIdentifierValue]/mix:ImageCaptureMetadata/ mix:ScannerCapture/mix:ScanningSystemSoftware/mix:scanningSoftwareName" /><xsl:if test="$scanningSoftwareName"><xsl:element name="ARCLib:scanningSoftwareName"><xsl:value-of select="$scanningSoftwareName"/></xsl:element></xsl:if><xsl:element name="ARCLib:eventDate"><xsl:value-of select="substring(premis:eventDateTime, 1, 10)"/></xsl:element><xsl:element name="ARCLib:eventCount"><xsl:value-of select="count(current-group())"/></xsl:element></xsl:element></xsl:for-each-group></xsl:element></xsl:element></xsl:element></xsl:element></xsl:element><!--generate ARCLib:ImageCaptureMetadata--><xsl:element name="METS:amdSec"><xsl:element name="METS:techMD"><xsl:attribute name="ID">ARCLIB_004</xsl:attribute><xsl:element name="METS:mdWrap"><xsl:attribute name="MDTYPE">OTHER</xsl:attribute><xsl:element name="METS:xmlData"><xsl:element name="ARCLib:ImageCaptureInformation"><xsl:for-each-group select="$amdSecs/METS:mets/METS:amdSec/METS:techMD/METS:mdWrap/ METS:xmlData/mix:mix/mix:ImageCaptureMetadata" group-by="concat(substring(mix:GeneralCaptureInformation/mix:dateTimeCreated, 1, 10), mix:GeneralCaptureInformation/mix:imageProducer, mix:ScannerCapture/mix:ScannerModel/mix:scannerModelSerialNo)"><xsl:element name="ARCLib:ImageCaptureMetadata"><xsl:element name="ARCLib:dateCreated"><xsl:value-of select="substring(mix:GeneralCaptureInformation/mix:dateTimeCreated, 1, 10)"/></xsl:element><xsl:element name="ARCLib:imageProducer"><xsl:value-of select="mix:GeneralCaptureInformation/mix:imageProducer"/></xsl:element><xsl:element name="ARCLib:scannerModelSerialNo"><xsl:value-of select="mix:ScannerCapture/mix:ScannerModel/mix:scannerModelSerialNo"/></xsl:element><xsl:element name="ARCLib:eventCount"><xsl:value-of select="count(current-group())"/></xsl:element></xsl:element></xsl:for-each-group></xsl:element></xsl:element></xsl:element></xsl:element></xsl:element><!--generate ARCLib:creatingApplication--><xsl:element name="METS:amdSec"><xsl:element name="METS:techMD"><xsl:attribute name="ID">ARCLIB_005</xsl:attribute><xsl:element name="METS:mdWrap"><xsl:attribute name="MDTYPE">OTHER</xsl:attribute><xsl:element name="METS:xmlData"><xsl:element name="ARCLib:creatingApplications"><xsl:for-each-group select="$amdSecs/METS:mets/METS:amdSec/METS:techMD/METS:mdWrap/ METS:xmlData/premis:object" group-by="concat(premis:objectCharacteristics/premis:creatingApplication/ premis:creatingApplicationName, premis:objectCharacteristics/premis:creatingApplication/ premis:creatingApplicationVersion, substring(premis:objectCharacteristics/premis:creatingApplication/ premis:dateCreatedByApplication, 1, 10))"><xsl:element name="ARCLib:creatingApplication"><xsl:element name="ARCLib:creatingApplicationName"><xsl:value-of select="premis:objectCharacteristics/premis:creatingApplication/ premis:creatingApplicationName"/></xsl:element><xsl:element name="ARCLib:creatingApplicationVersion"><xsl:value-of select="premis:objectCharacteristics/premis:creatingApplication/ premis:creatingApplicationVersion"/></xsl:element><xsl:element name="ARCLib:dateCreatedByApplication"><xsl:value-of select="substring(premis:objectCharacteristics/ premis:creatingApplication/premis:dateCreatedByApplication, 1, 10)"/></xsl:element><xsl:element name="ARCLib:eventCount"><xsl:value-of select="count(current-group())"/></xsl:element></xsl:element></xsl:for-each-group></xsl:element></xsl:element></xsl:element></xsl:element></xsl:element></xsl:copy></xsl:template><!-- == GENERIC TEMPLATES: == --><!-- Copy the children of the current node. --><xsl:template name="copy-children"><xsl:copy-of select="./*"/></xsl:template><!-- Generic identity template --><xsl:template match="node()|@*"><xsl:copy><xsl:apply-templates select="@*"/><xsl:apply-templates/></xsl:copy></xsl:template></xsl:stylesheet>
', '[^\/]+\/mets.*\.xml', 'if (/mets/@TYPE = ''Monograph'') then  	if(/mets/dmdSec[starts-with(@ID,''MODSMD_VOLUME'')]//identifier[@type=''uuid'']/text()) 		then /mets/dmdSec[starts-with(@ID,''MODSMD_VOLUME'')]//identifier[@type=''uuid'']/text() 	else 		/mets/dmdSec[starts-with(@ID,''MODSMD_SUPPL'')]//identifier[@type=''uuid'']/text() else 	if(/mets/@TYPE = ''Periodical'') then 		if(/mets/dmdSec[starts-with(@ID,''MODSMD_ISSUE'')]//identifier[@type=''uuid'']/text()) 			then /mets/dmdSec[starts-with(@ID,''MODSMD_ISSUE'')]//identifier[@type=''uuid'']/text() 		else 			/mets/dmdSec[starts-with(@ID,''MODSMD_SUPPL'')]//identifier[@type=''uuid'']/text() 	else 		null', '[^\/]+\/mets.*\.xml', 'Sip profile 1', true);

INSERT INTO public.arclib_producer_profile(id, external_id, created, updated, producer_id, validation_profile_id, sip_profile_id, workflow_config, workflow_definition_id, name, debugging_mode_active)
VALUES ('b0384aeb-5169-459a-b5f4-483e6ad7b949', '901', current_timestamp, current_timestamp, 'aa7ddcc5-5b81-4747-bfeb-1850d952a359', '7916f84a-8958-4427-9c3c-6232f5326237', '3cdc21a2-8b2a-4b56-81a8-3d2ee82ab6b4', '{}', 'b1b6cc1a-0581-4e35-8b42-49e293753c16','Producer profile 1', true);